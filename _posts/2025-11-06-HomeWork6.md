---
layout: post
title: "HomeWork 6"
date: 2025-11-06
markdown: kramdown
---

Analytical Task
Derive the simplest proofs for the recurrence relationships of the arithmetic mean and variance. Implement and test the corresponding online algorithms, which update statistics incrementally as new data becomes available. Traditional "batch" algorithms should not be used, as they are computationally less efficient, more memory-intensive, and prone to numerical instability (e.g., error propagation, catastrophic cancellation, and overflow).

Optional Discussion
From a numerical analysis and computational perspective, discuss the advantages of online algorithms in terms of numerical stability, error propagation, catastrophic cancellation, and overflow management. You may also comment on their computational efficiency, robustness, and scalability, comparing them with traditional batch algorithms.

# ðŸ“Š Analytical Task: Online Algorithms for Mean and Variance (JavaScript)

---

## 1. Introduction

Traditional *batch algorithms* for computing statistical measures like the **mean** and **variance** require access to all data points at once.  
While conceptually simple, this approach becomes inefficient and unstable when working with large datasets or data streams.

**Online algorithms** (also called *incremental* or *streaming algorithms*) address these issues by updating the statistics dynamically â€” as each new observation arrives â€” without reprocessing or storing the entire dataset.

This document presents the mathematical derivations, JavaScript implementation, and numerical analysis of **Welfordâ€™s online algorithm** for computing the **arithmetic mean** and **variance** efficiently and stably.

---

## 2. Theoretical Background

### 2.1 Arithmetic Mean (Incremental Formula)

Let the mean after \( n-1 \) observations be:

\[
\bar{x}_{n-1} = \frac{1}{n-1}\sum_{i=1}^{n-1} x_i
\]

When a new value \( x_n \) is observed, the updated mean becomes:

\[
\bar{x}_n = \frac{1}{n}\sum_{i=1}^{n} x_i
\]

Substituting and simplifying:

\[
\bar{x}_n = \bar{x}_{n-1} + \frac{x_n - \bar{x}_{n-1}}{n}
\]

âœ… This recurrence relation updates the mean efficiently without revisiting past data.

---

### 2.2 Variance (Welfordâ€™s Recurrence Relation)

The population variance is defined as:

\[
\sigma_n^2 = \frac{1}{n}\sum_{i=1}^n (x_i - \bar{x}_n)^2
\]

To compute this incrementally, define:

\[
M_{2,n} = \sum_{i=1}^{n}(x_i - \bar{x}_n)^2
\]

When a new data point \( x_n \) arrives:

\[
\begin{aligned}
\delta &= x_n - \bar{x}_{n-1} \\
\bar{x}_n &= \bar{x}_{n-1} + \frac{\delta}{n} \\
M_{2,n} &= M_{2,n-1} + \delta \cdot (x_n - \bar{x}_n)
\end{aligned}
\]

Finally, the variance is given by:

\[
\sigma^2 = \frac{M_{2,n}}{n}, \quad s^2 = \frac{M_{2,n}}{n-1}
\]

---

## 3. JavaScript Implementation

Below is a compact and efficient JavaScript implementation of **Welfordâ€™s online algorithm**.

```js
// Welford's Online Algorithm for Mean and Variance
class OnlineStats {
  constructor() {
    this.n = 0;
    this.mean = 0;
    this.M2 = 0;
  }

  // Update the statistics with a new data point
  update(x) {
    this.n++;
    const delta = x - this.mean;
    this.mean += delta / this.n;
    const delta2 = x - this.mean;
    this.M2 += delta * delta2;
  }

  // Population variance
  get variancePopulation() {
    return this.n > 0 ? this.M2 / this.n : NaN;
  }

  // Sample variance
  get varianceSample() {
    return this.n > 1 ? this.M2 / (this.n - 1) : NaN;
  }

  // Standard deviation
  get std() {
    return Math.sqrt(this.varianceSample);
  }
}

// Example Usage
const data = [10, 12, 23, 23, 16, 23, 21, 16];
const stats = new OnlineStats();

data.forEach(x => stats.update(x));

console.log("Count:", stats.n);
console.log("Mean:", stats.mean.toFixed(3));
console.log("Sample Variance:", stats.varianceSample.toFixed(3));
console.log("Sample Std Dev:", stats.std.toFixed(3));
